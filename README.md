# Talk2MeApi

## Prerequisites

1. Node.js version 16
   - <https://nodejs.org/en/blog/release/v16.16.0>
2. Postgres running locally or access to postgres on the cloud
   - <https://www.pgadmin.org/download/>
3. Qdrant running locally or access to qdrant on the cloud
   - Install docker to run localy
   - `docker pull qdrant/qdrant`
   - `docker run -p 6333:6333 -p 6334:6334 -v $(pwd)/qdrant_storage:/qdrant/storage:z qdrant/qdrant`
4. OpenAI account with AI key
5. Yarn
   - <https://classic.yarnpkg.com/lang/en/docs/install/>

## Dev Setup

1. Run `yarn install`
2. Copy sample.env to a new file, rename to .env
3. Ensure all values are filled and correct in .env
4. Run `yarn dev`

## Autogenerated routes

We use tsoa to autogenerate routes. This autogeneration occurs every time you run `yarn dev` or `yarn start`. Autogenerated files are writen to src/build and should not be manually edited. The express app will register routes from the exported RegisterRoutes() in the autogenerated routes.ts.

## SwaggerUI

To test API changes, you can use SwaggerUI at <http://localhost:3000/swagger> after running `yarn dev`

## Troubleshooting

### Issue 1 No user in the user Table

Make sure you run `yarn dev`, which will run the server in development mode, it will create a test user in the database for you.

### Issue 2 Qdrant host incorrect

Ensure that the host string does in include https:// or the port number
